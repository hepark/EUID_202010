[â† BACK](./README.md)

# DAY 13 (2020-11-05, ëª©)

> _ì§ˆë¬¸ì—ëŠ” â“, ë‹µë³€ì—ëŠ” ğŸ¤–ê°€ ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤._
>
> _ì´í•´ê°€ ì™„ì „í•˜ì§€ ì•Šì€ ê°œë…ì—ëŠ” ğŸ¤¯, ê·¤ íŒì—ëŠ” ğŸŠì´ ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤._

## Mini Project
ì–´ì œì— ì´ì–´ì„œ Ediya Coffee ì›¹ ë§Œë“¤ê¸° ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ ì‹¤ìŠµì„ ê³„ì†í•œë‹¤ (3ì¼ì°¨).

### Yesterday I Learned...ğŸ¤“ 

<details start>
<summary>ì–´ì œ ì‹¤ìŠµí•œ ë‚´ìš© í›‘ì–´ë³´ê¸°ğŸŒ</summary>
<br />
[ì–´ì œ](./D12.md)ëŠ” ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ ì‹¤ìŠµì„ 2ì¼ì°¨ì˜€ë‹¤. <ins> `props`ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³ , ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ ê´€ë¦¬</ins>í•  ìˆ˜ ìˆì—ˆë‹¤. ë˜í•œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ ìŠ¤ë¥´ë¥µğŸŒ ì—´ê³  ë‹«í˜ì„ ë§Œë“œëŠ” ê³¼ì •ì„ í†µí•´, <ins>í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ `state`ë¥¼ ì„¤ì •í•˜ê³  `setState` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ ë°œìƒì‹œ ìƒíƒœë¥¼ ë°”ê¿”ì£¼ëŠ” ë²•</ins>ë„ ë°°ì› ë‹¤. íŠ¹íˆ ìŠ¤ë¥´ë¥µğŸŒ ì• ë‹ˆë©”ì´ì…˜ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ <ins>`window.setTimeout(() => {...}, delay)`ì„ ì´ìš©í•˜ì—¬ íƒ€ì„ ì»¨íŠ¸ë¡¤</ins>ì„ í•´ë³´ì•˜ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ <ins>ì»¨í…ìŠ¤íŠ¸ APIğŸ‘€ ë°ì´í„°ë¥¼ ì €ì¥í•´ë‘” íŒŒì¼ì¸ `json`ì„ importí•˜ì—¬, `React.createContext`ë¡œ í•´ë‹¹ ë°ì´í„°ë¥¼ contextë¡œ ìƒì„±í•˜ê³ , `Context.Provider value = { value }`ë¡œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼ ê³µìœ </ins>í•˜ëŠ” ê²ƒê¹Œì§€ í•´ë³´ì•˜ë‹¤.     
</details>

<details start>
<summary>ì–´ì œì˜ Ediya Coffeeâ˜• (ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ ì‹¤ìŠµ 2ì¼ì°¨ ê²°ê³¼ë¬¼)</summary>
<br />

![ì‹¤ìŠµ 2ì¼ì°¨ ê²°ê³¼ë¬¼](./assets/week03_day12_08.gif "ì‹¤ìŠµ 2ì¼ì°¨ ê²°ê³¼ë¬¼")

</details>

---

### ì»´í¬ë„ŒíŠ¸ ì ‘ê·¼ì„± ê°œì„ 

#### í‚¤ë³´ë“œ ì ‘ê·¼ì„± ì„¤ì • ref, forwardRef, shouldComponentUpdate ğŸ¤¯

<details start>
<summary> Tab, Shift, ESC í‚¤ë¥¼ ì´ìš©í•˜ì—¬ í‚¤ë³´ë“œ ì‚¬ìš©ë§Œìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ ììœ ìì¬ë¡œ ì´ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ë³´ìğŸ¤¸â€â™€ï¸</summary>
<br />
<details start>
<summary>AppNavigation.jsx ì½”ë“œ ë³´ê¸°ğŸ‘€</summary>

```sh
// AppNavigation.jsx
import './AppNavigation.scss'
import React, { Component, Fragment } from 'react'
import EdiyaContext from '../../context/ediyaContext'
import AppButton from './../AppButton/AppButton'

class AppNavigation extends React.Component {
  static contextType = EdiyaContext
  state = {
    isOpen: false,
    classes: 'appNavigation',
  }

  handleOpenMenu = (e) => {
    this.setState(
      {
        isOpen: true,
      },
      () => {
        window.setTimeout(() => {
          this.setState({
            classes: 'appNavigation is-active',
          })
        }, 100)
      },
    )
  }

  handleCloseMenu = (e) => {
    this.setState(
      {
        classes: 'appNavigation',
      },
      () => {
        window.setTimeout(() => {
          this.setState({
            isOpen: false,
          })
        }, 400)
      },
    )
  }

  handleFocusCloseMenuButton = (e) => {
    if (e.shiftKey && e.keyCode == 9) {
      e.preventDefault()
      this.refs.closeButton.focus()
    }
  }

  handleFocusFirstLink = (e) => {
    if (!e.shiftKey && e.keyCode == 9) {
      e.preventDefault()
      this.refs.firstLink.focus()
    }
  }

  handleEscCloseMenu = (e) => {
    console.log('keydown')
    if (e.keyCode == 27) {
      this.handleCloseMenu()
    }
  }

  shouldComponentUpdate(nextProps, { isOpen }) {
    const methodName = isOpen ? 'addEventListener' : 'removeEventListener'

    window.addEventListener('keydown', this.handleEscCloseMenu)
    return true
  }

  render() {
    const {
      navigation: { title, items },
    } = this.context
    return (
      <Fragment>
        <AppButton
          className="is-open-menu"
          label="ë©”ë‰´ ì—´ê¸°"
          onClick={this.handleOpenMenu}
        >
          <span className="ir" />
        </AppButton>

        <nav className={this.state.classes} hidden={!this.state.isOpen}>
          <h2 className="a11yHidden">{title}</h2>
          <ul className="resetList">
            {items.map(({ link, text }, index) => (
              <li key={`${link}-${index}`}>
                <a
                  ref={index == 0 ? 'firstLink' : null}
                  href={link}
                  onKeyDown={
                    index == 0 ? this.handleFocusCloseMenuButton : null
                  }
                >
                  {text}
                </a>
              </li>
            ))}
          </ul>

          <AppButton
            ref="closeButton"
            className="is-close-menu"
            label="ë©”ë‰´ ë‹«ê¸°"
            onClick={this.handleCloseMenu}
            onKeyDown={this.handleFocusFirstLink}
          >
            <span className="close" aria-hidden="true">
              Ã—
            </span>
          </AppButton>
        </nav>
      </Fragment>
    )
  }
}

export default AppNavigation
```
</details>

<details start>
<summary>AppButton.js ì½”ë“œ ë³´ê¸°ğŸ‘€</summary>

```sh
// AppButton.js
import React, { forwardRef } from 'react'
import classNames from 'classnames'

const AppButton = ({children, className, label, ...restProps}, ref) => {
    const combineClassNames = classNames('resetButton', className)
    return (
        <button
        ref={ref}
        {...restProps}
          className={combineClassNames}
          type="button"
          title={label || null}
          aria-label={label || null}
        >
            {children}
        </button>
    )
};

export default forwardRef(AppButton)
```
</details>

1. ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ ì²«ë²ˆì§¸ ìš”ì†Œ (`ë©”ë‰´`)ì— `ref`ê°’ìœ¼ë¡œ `firstLink`ë¥¼ ë¶€ì—¬í•˜ê³ , `onkeyDown` ì´ë²¤íŠ¸ë¥¼ ì—°ê²°í•œë‹¤. ì´ ì´ë²¤íŠ¸ëŠ” ì‚¬ìš©ìê°€ ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ ì²«ë²ˆì§¸ ìš”ì†Œ (`ë©”ë‰´`)ì—ì„œ `Shift`ì™€ `Tab` í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ ë™ì‘ì„ ì°¨ë‹¨í•˜ê³  ë§ˆì§€ë§‰ ë²„íŠ¼ `closeButton` (`ref`ê°’ì´ `closeButton`ì¸ ìš”ì†Œ)ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ í•œë‹¤. ì—¬ê¸°ì„œ ë§í•˜ëŠ” ë§ˆì§€ë§‰ ë²„íŠ¼ì€ ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ ë‹«ëŠ” `x` ë²„íŠ¼ì„ ë§í•œë‹¤. 

```sh
// AppNavigation.jsx
...

// `Shift`ì™€ `Tab` í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ ë™ì‘ì„ ì°¨ë‹¨í•˜ê³  ë§ˆì§€ë§‰ ë²„íŠ¼ `closeButton` (`ref`ê°’ì´ `closeButton`ì¸ ìš”ì†Œ)ì´ `focus`ë˜ë„ë¡ í•œë‹¤. 
 handleFocusCloseMenuButton = (e) => {
    if (e.shiftKey && e.keyCode == 9) {
      e.preventDefault()
      this.refs.closeButton.focus()
    }
  }

  ...


// `index`ê°’ì´ 0ì¸ ê²½ìš°ì—ë§Œ `handleFocusCloseMenuButton`ì„ ì‹¤í–‰í•œë‹¤.
<a
    ref={index == 0 ? 'firstLink' : null}
    href={link}
    onKeyDown={
    index == 0 ? this.handleFocusCloseMenuButton : null
    }
>

...
```

>ğŸŠ `Tab`í‚¤ì˜ keyCodeê°€ 9ì¸ ê±´ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆì„ê¹Œ?<br /> ìë°”ìŠ¤í¬ë¦½íŠ¸ ì´ë²¤íŠ¸ keyCode ì •ë³´ëŠ” ì—¬ê¸°ë¡œ ğŸ‘‰[http://keycode.info/](http://keycode.info/)
>![JS keycode `tab`](./assets/week03_day13_02.png "JS keycode `tab`")

2. ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ ë§ˆì§€ë§‰ ë²„íŠ¼ (ë„¤ë¹„ê²Œì´ì…˜ ë°” ë‹«ëŠ” ë²„íŠ¼ `x`)ì˜ `ref`ê°’ì„ `closeButton`ìœ¼ë¡œ ì„¤ì •í•œë‹¤.

```sh
// AppNavigation.jsx
...

// ë§ˆì§€ë§‰ ë²„íŠ¼ì—ë„ ì°¸ì¡° ê°€ëŠ¥í•œ `ref`ë¥¼ ì„¤ì •í•œë‹¤.  
<AppButton
    ref="closeButton"
    className="is-close-menu"
    label="ë©”ë‰´ ë‹«ê¸°"
    onClick={this.handleCloseMenu}
>
    <span className="close" aria-hidden="true">
        Ã—
    </span>
</AppButton>

...
```

3. `x` ë²„íŠ¼ì„ ê°ì‹¸ê³  ìˆëŠ” `AppButton`ì€ `AppButton.js`ë¡œë¶€í„° importí•´ì˜¨ ìš”ì†Œë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `x` ë²„íŠ¼ì˜ `AppButton`ì— `ref`ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ ë¨¼ì € `AppButton.js`ì— `ref`ê°’ì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. `AppButton.js` ì»´í¬ë„ŒíŠ¸ëŠ” ì „ë‹¬ë°›ì€ ê°’ì„ `ref`ê°’ìœ¼ë¡œ ì„¤ì •í•˜ê²Œ ëœë‹¤. `ref`ë¥¼ ì „ë‹¬ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ `React.forwardRef`ë‹¤. `React.forwardRef`ëŠ” ì²«ë²ˆì§¸ ì¸ìë¡œ `props`ë¥¼, ë‘ë²ˆì§¸ ì¸ìë¡œëŠ” `ref`ë¥¼ ì „ë‹¬í•œë‹¤. ë”°ë¼ì„œ `AppButton.js` ì»´í¬ë„ŒíŠ¸ë¥¼ `React.forwardRef`ë¡œ ë˜í•‘í•˜ê³ , ë‘ë²ˆì§¸ë¡œ ì „ë‹¬ë°›ì€ ì¸ìë¥¼ `ref` ê°’ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤. (`React.forwardRef` ê°œë… ì¶”ê°€ í•™ìŠµ í•„ìš”ğŸ¤¯)

```sh
// AppButton.js
import React, { forwardRef } from 'react'
import classNames from 'classnames'

const AppButton = ({children, className, label, ...restProps}, ref) => {
    const combineClassNames = classNames('resetButton', className)
    return (
        <button
        ref={ref}
        {...restProps}
          className={combineClassNames}
          type="button"
          title={label || null}
          aria-label={label || null}
        >
            {children}
        </button>
    )
};

export default forwardRef(AppButton)
```

4. ì—¬ê¸°ê¹Œì§€ í•˜ë©´ ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ ì²«ë²ˆì§¸ ìš”ì†Œì—ì„œ `Shift` + `Tab` í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ ë‹«ëŠ” ë²„íŠ¼ `x`ìœ¼ë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. ì´ì œëŠ” `x` ë²„íŠ¼ì—ì„œ `Tab`ì„ ëˆŒë €ì„ ë•Œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ì˜ ì²«ë²ˆì§¸ ìš”ì†Œì¸ `menu`ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆë„ë¡ ì œì–´í•´ë³´ì. ì•„ë˜ì™€ ê°™ì´ ë§ˆì§€ë§‰ ë²„íŠ¼ì— `onKeyDown` ì´ë²¤íŠ¸ë¥¼ ì—°ê²°í•œë‹¤.  

```sh
// AppNavigation.jsx
...
// `Tab` í‚¤ë¥¼ ëˆ„ë¥´ë©´ ê¸°ë³¸ ë¸Œë¼ìš°ì € ë™ì‘ì„ ì°¨ë‹¨í•˜ê³  `ref`ê°€ `firstLink`ì¸ ìš”ì†Œê°€ `focus`ë˜ë„ë¡ í•œë‹¤.
handleFocusFirstLink = (e) => {
    if (!e.shiftKey && e.keyCode == 9) {
        e.preventDefault()
        this.refs.firstLink.focus()
    }
}

...

<AppButton
    ref="closeButton"
    className="is-close-menu"
    label="ë©”ë‰´ ë‹«ê¸°"
    onClick={this.handleCloseMenu}
    onKeyDown={this.handleFocusFirstLink}
>
    <span className="close" aria-hidden="true">
        Ã—
    </span>
</AppButton>

...
```

5. ë§ˆì§€ë§‰ìœ¼ë¡œ `esc` í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ ë‚˜ê°ˆ ìˆ˜ ìˆë„ë¡ í•´ë³´ì. ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í• ì§€ ë§ì§€ë¥¼ ê²°ì •í•˜ëŠ” ë¼ì´í”„ ì‚¬ì´í´ í‘¹ì¸ `shouldComponentUpdate`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„¤ë¹„ê²Œì´ì…˜ ë°”ê°€ ì—´ë ¸ì„ ë•Œ, ì¦‰ `isOpen`ì´ `true`ì¸ ìƒíƒœì—ì„œë§Œ `keydown` ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì—¬ í•¸ë“¤ëŸ¬ `handleEscCloseMenu`ê°€ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤. (`ë¼ì´í”„ ì‚¬ì´í´ í›…` ê°œë… ì¶”ê°€ í•™ìŠµ í•„ìš”ğŸ¤¯)

>ğŸŠ `scu`ë¡œ `shouldComponentUpdate`í•˜ê¸°
>![scu](./assets/week03_day13_04.gif "scu")

<details start>
<summary>ESC í‚¤ì˜ keyCode í™•ì¸í•˜ê¸°</summary>
<br />
![JS keycode `esc`](./assets/week03_day13_03.png "JS keycode `esc`")
</details>

```sh
// AppNavigation.js
...

  // `isOpen`ì˜ ìƒíƒœë¥¼ `false`ë¡œ ë³€ê²½í•˜ì—¬ ë„¤ë¹„ê²Œì´ì…˜ ë°”ê°€ ë‹«íˆë„ë¡ í•œë‹¤
  handleCloseMenu = (e) => {
    this.setState(
      {
        classes: 'appNavigation',
      },
      () => {
        window.setTimeout(() => {
          this.setState({
            isOpen: false,
          })
        }, 400)
      },
    )
  }

  // `keyCode`ê°€ 27ì¸ `esc` í‚¤ë¥¼ ëˆŒë €ì„ ë•Œ `handleCloseMenu`ê°€ ì‹¤í–‰ëœë‹¤
  handleEscCloseMenu = (e) => {
    console.log('keydown')
    if (e.keyCode == 27) {
      this.handleCloseMenu()
    }
  }
  
  // `isOpen`ì´ `true`ë©´ `addEventListener`, `false`ë©´ `removeEventListener`
  shouldComponentUpdate(nextProps, { isOpen }) {
    const methodName = isOpen ? 'addEventListener' : 'removeEventListener'

    window.addEventListener('keydown', this.handleEscCloseMenu)
    return true
  }

...
```
<details start>
<summary>ìœ„ì—ì„œ ì–¸ê¸‰ì€ ì•ˆí–ˆì§€ë§Œ, ì˜ìƒ ê°•ì˜ì—ì„œ ë‚˜ì˜¨ íŒì„ ë‹´ì€ ê·¤ë°”êµ¬ë‹ˆğŸŠ</summary>
<br />
>ğŸŠ `cdm`ë¡œ `componentDidMount`í•˜ê¸° 
>![cdm](./assets/week03_day13_01.gif "cdm")

>ğŸŠ `clg`ë¡œ `console.log`í•˜ê¸° 
>![clg](./assets/week03_day13_05.gif "clg")
</details>


</details>

<details start>
<summary>ì—¬ê¸°ê¹Œì§€ì˜ Ediya Coffeeâ˜•</summary>
<br />

![í‚¤ë³´ë“œ ì ‘ê·¼ì„± ì ìš© ê²°ê³¼](./assets/week03_day13_06.gif "í‚¤ë³´ë“œ ì ‘ê·¼ì„± ì ìš© ê²°ê³¼")

</details>

#### ì»´í¬ë„ŒíŠ¸ ì°¸ì¡° ì „ë‹¬ forwardRef ê³¼ ê°œë°œ ë„êµ¬ì—ì„œ ì´ë¦„ í‘œì‹œ ì„¤ì •

<details start>
<summary> ê°œë°œì ë„êµ¬ì˜ Componentsì—ì„œ ì»´í¬ë„ŒíŠ¸ ì°¸ì¡° ì „ë‹¬ì˜ ì´ë¦„ì´ í‘œì‹œë  ìˆ˜ ìˆë„ë¡ í•´ë³´ì. ë˜í•œ ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ í‘œì‹œë  ìˆ˜ ìˆë„ë¡ í•˜ì.</summary>
<br />

ì•„ë˜ì™€ ê°™ì´ `forwardRef`ì„ ì ìš©í•˜ëŠ” ê²½ìš°, ê°œë°œì ë„êµ¬ `Components`ì—ì„œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ì€ `Anonymous`ë¡œ ëœ¬ë‹¤.

```sh
// AppButton.js
import React, { forwardRef } from 'react'
import classNames from 'classnames'

const AppButton = forwardRef(({children, className, label, ...restProps}, ref) => {
    const combineClassNames = classNames('resetButton', className)
    return (
        <button
        ref={ref}
        {...restProps}
          className={combineClassNames}
          type="button"
          title={label || null}
          aria-label={label || null}
        >
            {children}
        </button>
    )
});

export default AppButton;

```
![anonymous](./assets/week03_day13_07.png "anonymous")<br /><br />

ìœ„ì™€ëŠ” ë‹¤ë¥´ê²Œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ì´ ì œëŒ€ë¡œ í‘œì‹œë˜ê²Œ í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ `forwardRef`ë¥¼ ì ìš©í•´ì•¼ í•œë‹¤.

```sh
// AppButton.js
import React, { forwardRef } from 'react'
import classNames from 'classnames'

const AppButton = ({children, className, label, ...restProps}, ref) => {
    const combineClassNames = classNames('resetButton', className)
    return (
        <button
        ref={ref}
        {...restProps}
          className={combineClassNames}
          type="button"
          title={label || null}
          aria-label={label || null}
        >
            {children}
        </button>
    )
};

export default forwardRef(AppButton)

```

![ì°¸ì¡° ì „ë‹¬ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ í‘œì‹œ](./assets/week03_day13_08.png "ì°¸ì¡° ì „ë‹¬ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ í‘œì‹œ")<br /><br />

ë˜í•œ `displayName`ì„ í™œìš©í•˜ì—¬ ê°œë°œì ë„êµ¬ì— í‘œì‹œë˜ëŠ” ì°¸ì¡° ì „ë‹¬ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ì„ ì›í•˜ëŠ” ëŒ€ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤. 

```sh
// AppButton.js
import React, { forwardRef } from 'react'
import classNames from 'classnames'

const AppButton = (
    ...
};

AppButton.displayName = "CommonButton"

export default forwardRef(AppButton)
```

![ì°¸ì¡° ì „ë‹¬ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ ì§€ì •í•˜ì—¬ í‘œì‹œ](./assets/week03_day13_09.png "ì°¸ì¡° ì „ë‹¬ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ ì§€ì •í•˜ì—¬ í‘œì‹œ")<br /><br />

</details>

---

### ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ & ì»¨í…ìŠ¤íŠ¸ Part 2

#### ì»´í¬ë„ŒíŠ¸ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ + Context API

<details start>
<summary> json íŒŒì¼ì— ìˆëŠ” beverage ì•„ì´í…œì˜ ê°œìˆ˜ë§Œí¼ ë©”ì¸ í™”ë©´ì— ìŒë£Œ ì‚¬ì§„ì´ í‘œì‹œë  ìˆ˜ ìˆë„ë¡ í•˜ì </summary>
<br />
<details start>
<summary>index.js ì½”ë“œ ë³´ê¸°ğŸ‘€</summary>

```sh
// index.js
import "react-app-polyfill/ie11";
import "styles/index.scss";
import React from "react";
import ReactDOM from "react-dom";
import App from "~/App";
import EdiyaContext, {ediyaData} from './context/ediyaContext'

ReactDOM.render(
  <EdiyaContext.Provider value={ediyaData}>
    <App />
  </EdiyaContext.Provider>, document.getElementById("reactApp"));

if (process.env.NODE_ENV === "production") {
  import("~/config/serviceWorker").then((serviceWorker) =>
    serviceWorker.register()
  );
}
```
</details>

í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `Context.Consumer`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ì„ í•  ìˆ˜ ìˆë‹¤.

```sh
// BeverageList.jsx
import React from 'react'
import BeverageItem from './../BeverageItem/BeverageItem'
import './BeverageList.scss'
import EdiyaContext from '../../context/ediyaContext'

const BeverageList = () => {
  return (
    <ul className="beverageList resetList">
      <EdiyaContext.Consumer>
        {({ beverage_menu: items }) =>
          items.map((item) => <BeverageItem key={item.id} item={item} />)
        }
      </EdiyaContext.Consumer>
    </ul>
  )
}

export default BeverageList
```
<br />
í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ë¡œ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ì„ í•˜ëŠ” ê²½ìš° ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤. 

```sh
// BeverageList.jsx
import React from 'react'
import BeverageItem from './../BeverageItem/BeverageItem'
import './BeverageList.scss'
import EdiyaContext from '../../context/ediyaContext'

class BeverageList extends React.Component {
  static contextType = EdiyaContext

  render() {
    const { beverage_menu: items } = this.context
    return (
      <ul className="beverageList resetList">
        {items.map((item) => (
          <BeverageItem key={item.id} item={item} />
        ))}
      </ul>
    )
  }
}

export default BeverageList

```
</details>

<details start>
<summary>ì—¬ê¸°ê¹Œì§€ì˜ Ediya Coffeeâ˜•</summary>
<br />

![ì»´í¬ë„ŒíŠ¸ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§](./assets/week03_day13_10.gif "ì»´í¬ë„ŒíŠ¸ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§")

</details>


#### ë‹¤ì´ì–¼ë¡œê·¸ ì¸í„°ë™ì…˜

<details start>
<summary> í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ stateê°€ ì•„ë‹Œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ useStateë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì´ì–¼ë¡œê·¸ ì¸í„°ë ‰ì…˜ ê¸°ëŠ¥ì„ ë„£ì–´ë³´ì. ë‘˜ ì¤‘ ì–´ëŠ ë°©ë²•ì„ ì“¸ì§€ëŠ” ë³¸ì¸ì˜ ê¸°í˜¸ì— ë”°ë¼ ì„ íƒí•˜ë©´ ëœë‹¤.</summary>
<br />

```sh
// BeverageItem.jsx
import React from 'react'
import './BeverageItem.scss'
import { Fragment, useState } from 'react'

const BeverageItem = ({
  item: {
    id,
    figure: { name, width, height, src },
    detail: { desc, en, ko, display_criteria: criteria },
  },
}) => {
  const uniqueId = `beverageList__item-${id}`
  const [pressed, setPressed] = useState(false)
  const [dialogClassName, setdialogClassName] = useState('beverageList__dialog')

  function handleShowDialog(e) {
    e.preventDefault()
    setPressed(true)
    window.setTimeout(() => {
      setdialogClassName('beverageList__dialog is-active')
    }, 100)
  }

  function handleHideDialog(e) {
    setdialogClassName('beverageList__dialog')
    window.setTimeout(() => {
      setPressed(false)
    }, 400)
  }

  return (
    <li className="beverageList__item">
      <a
        className="beverageList__button"
        href="#"
        role="button"
        aria-haspopup="true"
        aria-pressed={pressed}
        onClick={handleShowDialog}
      >
        <figure>
          <img src={src} width={width} height={height} alt="" />
          <figcaption>{name}</figcaption>
        </figure>
      </a>
      <div
        className={dialogClassName}
        hidden={!pressed}
        role="dialog"
        aria-modal="false"
        aria-labelledby={uniqueId}
      >
        <h3 className="beverageList__dialog--name" id={uniqueId}>
          {ko}
          <span lang="en">{en}</span>
        </h3>
        <p>{desc}</p>
        <div className="beverageList__dialog--multiColumn is-2">
          <dl>
            {criteria.map(([dt, dd], index) => (
              <Fragment key={index}>
                <dt>{dt}</dt>
                <dd>({dd})</dd>
              </Fragment>
            ))}
          </dl>
        </div>
        <button
          className="button is-close-dialog"
          type="button"
          title="ë‹«ê¸°"
          aria-label="ìŒë£Œ ì •ë³´ íŒ¨ë„ ë‹«ê¸°"
          onClick={handleHideDialog}
        >
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
    </li>
  )
}

export default BeverageItem
```
</details>

<details start>
<summary>ì—¬ê¸°ê¹Œì§€ì˜ Ediya Coffeeâ˜•</summary>
<br />

![ë‹¤ì´ì–¼ë¡œê·¸ ì¸í„°ë ‰ì…˜](./assets/week03_day13_11.gif "ë‹¤ì´ì–¼ë¡œê·¸ ì¸í„°ë ‰ì…˜")

</details>

--- 

### í˜ì´ì§€ ìƒë‹¨ ìŠ¤í¬ë¡¤ ì´ë™

#### í˜ì´ì§€ ìƒë‹¨ ì´ë™ ì¸í„°ë™ì…˜ GoToTop

<details start>
<summary> í˜ì´ì§€ ìŠ¤í¬ë¡¤ì´ í•˜ë‹¨ìœ¼ë¡œ ë‚´ë ¤ì™€ ìˆì„ ë•Œ, í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ë°”ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” GoToTop ë²„íŠ¼ì„ ë§Œë“¤ì. </summary>
<br />

`GoToTop` ì»´í¬ë„ŒíŠ¸ì— ìˆëŠ” `button`ì˜ `className`ì— `is-show`ê°€ ë¶™ìœ¼ë©´ `GoToTop` ë²„íŠ¼ (í˜ì´ì§€ í•˜ë‹¨ìœ¼ë¡œ ë‚´ë ¤ê°”ì„ ë•Œ, ìƒë‹¨ìœ¼ë¡œ ë°”ë¡œ ìŠ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë²„íŠ¼)ì´ ë³´ì´ê²Œ ëœë‹¤ (`GoToTop.scss` ì°¸ì¡°). ì¦‰ (1) ìƒíƒœ `state` ì— ë”°ë¼ ë²„íŠ¼ì˜ `className`ì´ ë³€ê²½ë˜ì–´ ë²„íŠ¼ì´ ë³´ì´ê±°ë‚˜ ë³´ì´ì§€ ì•Šì„ ìˆ˜ ìˆë„ë¡ í•˜ê³ , (2) ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ì´ë™í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì‘ë™í•˜ë„ë¡ í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•œ ê°„ëµí•œ ì ˆì°¨ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤: 

1. `state`ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½í•œë‹¤.
2. ì»´í¬ë„ŒíŠ¸ì˜ `defaultProps`ì™€ `state`ë¥¼ ì„¤ì •í•œë‹¤. 
    - ì—¬ê¸°ì„œ `defaultProps`ëŠ” ë²„íŠ¼ì´ ë³´ì´ê²Œ ë˜ëŠ” í˜ì´ì§€ì˜ í¬ì§€ì…˜ì„ ì§€ì •í•˜ë©°, ê¸°ë³¸ `state`ëŠ” `className`ì— `is-show`ê°€ ë¶™ì„ì§€ ë§ì§€ë¥¼ ê²°ì •í•˜ëŠ” ì¡°ê±´(`isShow`)ì´ ì§€ì •ëœë‹¤.
3. `state`ê°€ ë³€ê²½ë˜ëŠ” ì¡°ê±´ì„ ì •í•˜ê³  `setState`ë¥¼ í™œìš©í•˜ì—¬ ì¡°ê±´ì— ë”°ë¥¸ `state`ê°€ ë³€ê²½ë˜ë„ë¡ í•œë‹¤. 
    - í˜ì´ì§€ì˜ í¬ì§€ì…˜ì´ 100ì„ ë„˜ì–´ê°€ë©´ `state`ë¥¼ `isShow`ëŠ” `true`ì¸ ê²ƒìœ¼ë¡œ ë³€ê²½ëœë‹¤.
4. `className`ì„ ë™ì  ë°”ì¸ë”© ì²˜ë¦¬í•˜ì—¬ `state`ì— ë”°ë¥¸ `className`ì´ ë³€ê²½ë˜ë„ë¡ í•œë‹¤.
    - `isShow`ê°€ `true`ë©´ ë²„íŠ¼ì˜ `className`ì—ëŠ” `is-show`ê°€ ë¶™ëŠ”ë‹¤.
5. ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆë„ë¡ `scrollIntoView` ë©”ì„œë“œë¥¼ ì ìš©í•œë‹¤.

<br />
ë³´ë‹¤ ìì„¸í•œ ì„¤ëª…ì€ ì•„ë˜ì˜ ì½”ë“œì— ì£¼ì„ìœ¼ë¡œ ë‹¬ì•„ ë†“ì•˜ë‹¤. ë¼ì´í”„ ì‚¬ì´í´ í›… ê°œë…ì´ ì•„ì§ ì´í•´ê°€ ì˜ ê°€ì§€ ì•ŠëŠ”ë‹¤ğŸ¤¯

```sh
import './GoToTop.scss'
import React from 'react'

// `state` ì„¤ì •ì€ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìœ„ì™€ ê°™ì´ ì‘ì„±ëœ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ `React Pure to Class` ìµìŠ¤í…ì…˜ì„ ì ìš©í•˜ì—¬ í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¡œ ë°”ê¿”ì¤€ë‹¤. 
// 
class GoToTop extends React.Component {
  // `state`ì˜ ì´ˆê¸° ê°’ì„ ì„¤ì •í•œë‹¤. 
  static defaultProps = {
    changeModePosition: 100,
  }
  state = {
    isShow: false,
  }

  // ìœˆë„ìš° í¬ì§€ì…˜ì´ 100ì„ ë„˜ì–´ê°€ë©´ `state`ì˜ `isShow`ë¥¼ `true`ë¡œ ë³€ê²½í•œë‹¤.
  // ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” `state`ì˜ `isShow`ë¥¼ `false`ë¡œ í•œë‹¤. 
  handleDetectScrollPosition = () => {
    if (window.scrollY > this.props.changeModePosition) {
      this.setState({
        isShow: true,
      })
    } else {
      this.setState({
        isShow: false,
      })
    }
  }
  
  // `scrollIntoView` ë©”ì„œë“œëŠ” í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ì´ë™í•˜ê²Œ í•´ì¤€ë‹¤. ì—¬ê¸°ì— `smooth` ì˜µì…˜ì„ ì¤˜ì„œ ë¶€ë“œëŸ½ê²Œ ì›€ì§ì´ëŠ” íš¨ê³¼ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤.
  handleGoToTop = () => {
    const html = documentation.documentElement
    html.scrollIntoView({ behavior: 'smooth' })
  }
   
  // ë¼ì´í”„ ì‚¬ì´í´ í›… ë³µìŠµ í•„ìš”...ğŸ¤¯ 
  componentDidMount() {
    window.addEventListener('scroll', this.handleDetectScrollPosition)
  }

  componentWillUnmount() {
    window.removeEventListener('scroll', this.handleDetectScrollPosition)
  }

  render() {
    return (
      <button
        type="button"
        // ì¡°ê±´ì— ë”°ë¼ `className`ì„ ë™ì  ë°”ì¸ë”©í•œë‹¤. 
        // `isShow`ê°’ì´ `true`ë©´ `is-show`ê°€ ëœë‹¤.
        className={`button goToTop ${
          this.state.isShow ? 'is-show' : ''
        }`.trim()}
        aria-label="í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ì´ë™"
        onClick={this.handleGoToTop}
      >
        <svg
          viewBox="0 0 64 64"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true"
        >
          <path d="m32 56c1.104 0 2-.896 2-2v-39.899l14.552 15.278c.393.413.92.621 1.448.621.495 0 .992-.183 1.379-.552.8-.762.831-2.028.069-2.828l-16.619-17.448c-.756-.755-1.76-1.172-2.829-1.172s-2.073.417-2.862 1.207l-16.586 17.414c-.762.8-.731 2.066.069 2.828s2.067.731 2.828-.069l14.551-15.342v39.962c0 1.104.896 2 2 2z" />
        </svg>
      </button>
    )
  }
}

export default GoToTop
```


</details>

#### React í›… í™œìš© useState, useEffect

<details start>
<summary> React í›… í™œìš© useState, useEffect </summary>
<br />

</details>

